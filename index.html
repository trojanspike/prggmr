<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Prggmr by nwhitingx</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Prggmr</h1>
        <p>The event library that will change the way you write PHP forever...</p>
        <p class="view"><a href="https://github.com/nwhitingx/prggmr">View the Project on GitHub <small>nwhitingx/prggmr</small></a></p>
        <ul>
          <li><a href="https://github.com/nwhitingx/prggmr/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/nwhitingx/prggmr/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/nwhitingx/prggmr">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p>prggmr is an event processing engine for PHP 5.4. designed to be lightweight, 
fast and very simple to use.</p>

<h2>Global events usage</h2>

<h3>Registering handles</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nx">prggmr\handle</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
    <span class="k">echo</span> <span class="s2">"The light is green go!"</span><span class="p">;</span>
<span class="p">},</span> <span class="s1">'light.green'</span><span class="p">);</span>
</pre>
</div>


<h3>Dispatching signals</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nx">prggmr\signal</span><span class="p">(</span><span class="s1">'light.green'</span><span class="p">);</span>
</pre>
</div>


<h3>Signal interruption before handle execution</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nx">prggmr\signal_interrupt</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
    <span class="k">echo</span> <span class="s2">"Inserting some data into the event for handles.."</span><span class="p">;</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span> <span class="o">=</span> <span class="s2">"HelloWorld"</span><span class="p">;</span>
<span class="p">},</span> <span class="s1">'light.green'</span><span class="p">,</span> <span class="nx">prggmr\Engine</span><span class="o">::</span><span class="na">INTERRUPT_PRE</span><span class="p">);</span>
</pre>
</div>


<h3>Signal interruption after handle execution</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nx">prggmr\signal_interrupt</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
    <span class="k">echo</span> <span class="s2">"Checking what happened in the handle"</span><span class="p">;</span>
<span class="p">},</span> <span class="s1">'light.green'</span><span class="p">,</span> <span class="nx">prggmr\Engine</span><span class="o">::</span><span class="na">INTERRUPT_POST</span><span class="p">);</span>
</pre>
</div>


<h3>Event history</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nx">prggmr\event_history</span><span class="p">());</span>
</pre>
</div>


<h2>Engine instance usage</h2>

<h3>Registering a prggmr\Engine</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nv">$engine</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">prggmr\Engine</span><span class="p">();</span>
</pre>
</div>


<h3>Registering handles</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nv">$engine</span><span class="o">-&gt;</span><span class="na">handle</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
    <span class="k">echo</span> <span class="s2">"The light is green go!"</span><span class="p">;</span>
<span class="p">},</span> <span class="s1">'light.green'</span><span class="p">);</span>
</pre>
</div>


<h3>Dispatching signals</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nv">$engine</span><span class="o">-&gt;</span><span class="na">signal</span><span class="p">(</span><span class="s1">'light.green'</span><span class="p">);</span>
</pre>
</div>


<h3>Signal interruption before handle execution</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nv">$engine</span><span class="o">-&gt;</span><span class="na">signal_interrupt</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
    <span class="k">echo</span> <span class="s2">"Inserting some data into the event for handles.."</span><span class="p">;</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span> <span class="o">=</span> <span class="s2">"HelloWorld"</span><span class="p">;</span>
<span class="p">},</span> <span class="s1">'light.green'</span><span class="p">,</span> <span class="nx">prggmr\Engine</span><span class="o">::</span><span class="na">INTERRUPT_PRE</span><span class="p">);</span>
</pre>
</div>


<h3>Signal interruption after handle execution</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nv">$engine</span><span class="o">-&gt;</span><span class="na">signal_interrupt</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
    <span class="k">echo</span> <span class="s2">"Checking what happened in the handle"</span><span class="p">;</span>
<span class="p">},</span> <span class="s1">'light.green'</span><span class="p">,</span> <span class="nx">prggmr\Engine</span><span class="o">::</span><span class="na">INTERRUPT_POST</span><span class="p">);</span>
</pre>
</div>


<h3>Event history</h3>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$engine</span><span class="o">-&gt;</span><span class="na">event_history</span><span class="p">());</span>
</pre>
</div>


<h2>Installation</h2>

<p>Depending on your needs prggmr can be installed using two different methods.</p>

<h3>Composer</h3>

<p>Include the following in your <code>composer.json</code> file.</p>

<div class="highlight">
<pre><span class="p">{</span>
    <span class="nt">"require"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"prggmr/prggmr"</span><span class="p">:</span> <span class="s2">"1.*.*"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
</div>


<p>Run the installer.</p>

<pre><code>$ curl -s http://getcomposer.org/installer | php
$ php composer.phar install
</code></pre>

<p>And include the library</p>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>

<span class="k">require_once</span> <span class="s1">'vendor/prggmr/prggmr/src/prggmr.php'</span><span class="p">;</span>
</pre>
</div>


<h3>Global system installation</h3>

<p>This method will install prggmr to your php include path.</p>

<p>Download the latest release and navigate a terminal to the extract directory.</p>

<pre><code># cd into the prggmr library so you see the README, LICENSE etc..
$ cd path/to/prggmr/extraction
# Get include path
$ php -r "echo get_include_path();"
# My output .:/usr/local/lib/php
# Copy prggmr to lib
$ sudo cp -Rf * /usr/local/lib/php/prggmr/*
# Copy bin
$ sudo ln -ls /usr/local/lib/php/prggmr/bin/prggmr /usr/bin/
# Test
$ prggmr -v
# Result
$ prggmr version 1.2.3
</code></pre>

<p>And include the library</p>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>

<span class="k">require_once</span> <span class="s1">'prggmr/src/prggmr.php'</span><span class="p">;</span>
</pre>
</div>


<h2>Documentation</h2>

<p>Documentation is available at <a href="http://www.prggmr.org">prggmr.org</a></p>

<h2>Mailing List</h2>

<p>The prggmr mailing list is located here <a href="https://groups.google.com/forum/?fromgroups#!forum/prggmr">mailing list</a>.</p>

<h2>Versions</h2>

<p>prggmr uses <a href="http://semver.org">semver</a> you should too.</p>

<h2>Signals Roadmap</h2>

<p>The following signals are on the development roadmap.</p>

<h3>CRON</h3>

<p>CRON based time signals based on <a href="http://docs.oracle.com/cd/E14592_01/doc.10142/e14611/cron_expressions.htm">http://docs.oracle.com/cd/E14592_01/doc.10142/e14611/cron_expressions.htm</a></p>

<h4>Example</h4>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>

<span class="c1">// every 15 minutes</span>
<span class="nx">prggmr\handle</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
<span class="p">},</span> <span class="k">new</span> <span class="nx">prggmr\signal\time\Cron</span><span class="p">(</span><span class="s1">'*/15 * * * *'</span><span class="p">));</span>

<span class="c1">// 23:00:00 every weekday night</span>
<span class="nx">prggmr\handle</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
<span class="p">}</span> <span class="k">new</span> <span class="nx">prggmr\signal\time\Cron</span><span class="p">(</span><span class="s1">'0 23 ? * MON-FRI'</span><span class="p">));</span>

<span class="c1">// 10:15 everyday</span>
<span class="nx">prggmr\handle</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
<span class="p">},</span> <span class="k">new</span> <span class="nx">prggmr\signal\time\Cron</span><span class="p">(</span><span class="s1">'0 15 10 * * ?'</span><span class="p">));</span>
</pre>
</div>


<h3>Event Stream Server</h3>

<p>W3C Event-Stream (Specs)[<a href="http://dev.w3.org/html5/eventsource/">http://dev.w3.org/html5/eventsource/</a>].</p>

<h4>Example</h4>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>

<span class="nv">$socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\prggmr\signal\http\EventStream</span><span class="p">();</span>

<span class="nx">handle</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$bytes</span><span class="p">){</span>
    <span class="c1">// do something</span>
<span class="p">},</span> <span class="nv">$socket</span><span class="o">-&gt;</span><span class="na">read</span><span class="p">());</span>

<span class="nx">handle</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$bytes</span><span class="p">){</span>
    <span class="c1">// do something</span>
<span class="p">},</span> <span class="nv">$socket</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">());</span>
</pre>
</div>


<h3>Non-Blocking Asynchronous Signal I/O</h3>

<p>This will allow for non-blocking event driven I/O using file descriptors or 
networking socktes.</p>

<h4>Example</h4>

<div class="highlight">
<pre><span class="cp">&lt;?php</span>

<span class="nv">$socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\prggmr\signal\io\Socket</span><span class="p">(</span><span class="s1">'127.0.0.1'</span><span class="p">,</span> <span class="mi">8888</span><span class="p">);</span>

<span class="nx">handle</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$bytes</span><span class="p">){</span>
    <span class="k">echo</span> <span class="s2">"Read bytes"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$bytes</span><span class="p">;</span>
<span class="p">},</span> <span class="nv">$socket</span><span class="o">-&gt;</span><span class="na">read</span><span class="p">(</span><span class="mi">1024</span><span class="p">));</span>

<span class="nx">handle</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$bytes</span><span class="p">){</span>
    <span class="k">echo</span> <span class="s2">"Writing bytes"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$bytes</span><span class="p">;</span>
<span class="p">},</span> <span class="nv">$socket</span><span class="o">-&gt;</span><span class="na">write</span><span class="p">());</span>

<span class="nx">handle</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$client</span><span class="p">){</span>
    <span class="k">echo</span> <span class="s2">"Client connected"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">ip_address</span><span class="p">;</span>
<span class="p">},</span> <span class="nv">$socket</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">());</span>

<span class="nx">handle</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="nv">$client</span><span class="p">){</span>
    <span class="k">echo</span> <span class="s2">"Client disconnected"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">ip_address</span><span class="p">;</span>
<span class="p">},</span> <span class="nv">$socket</span><span class="o">-&gt;</span><span class="na">disconnect</span><span class="p">());</span>
</pre>
</div>

      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/nwhitingx">nwhitingx</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>